<!DOCTYPE html>
<html>
	<head>
	<title>Crear Usuario</title>
	<meta charset="UTF-8">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
		integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
		<link rel="stylesheet" th:href="@{/css/menuHeader.css}" />
		<link rel="stylesheet" th:href="@{/css/recursos.css}" />
		<link rel="stylesheet" th:href="@{/css/toast.min.css}">
	</head>
<body>
	<input type="text" id="message" th:value="${message}" hidden>
	<input type="text" id="alert" th:value="${alert}" hidden>
	<input type="text" id="errors" th:value="${errors}" hidden>
	<div class="container-fluid">
	<div th:insert="~{fragments/header::header}"></div>
		<div class="row">
            <div class="col">
                <div class="card mt-12">
                    <div class="card-body">
						<h2 class="mb-3">Nuevo Ciudadano</h2>
						<form th:action="@{/ciudadano/save}" th:object="${ciudadano}" method="post" enctype="multipart/form-data">
  							<div class="form-row">
    							<div class="form-group col-md-4">
    								<label for="nombre">Nombre</label>
      								<input name="nombre" id="nombre" th:field="*{nombre}" type="text" class="form-control" placeholder="Escribe el nombre..."
										pattern="^([A-Z][a-z]+([ ]?[a-z]?['-]?[A-Z][a-z]+)*)$"
                                		title="El nombre no puede contener números y/o caracteres especiales" 
                               	 		maxlength="100" required
									>
    							</div>
								<div class="form-group col-md-4">
    								<label for="primerApellido">Primer Apellido</label>
      								<input name="primerApellido" id="primerApellido" th:field="*{primerApellido}" type="text" class="form-control" placeholder="Escribe el primer apellido..."
										pattern="^([A-Z][a-z]+([ ]?[a-z]?['-]?[A-Z][a-z]+)*)$"
                                		title="El primer apellido no puede contener números y/o caracteres especiales" 
                               	 		maxlength="100" required
									>
    							</div>
								<div class="form-group col-md-4">
    								<label for="segundoApellido">Segundo Apellido</label>
      								<input name="segundoApellido" id="segundoApellido" th:field="*{segundoApellido}" type="text" class="form-control" placeholder="Escribe el segundo apellido...">
    							</div>
  							</div>
  							<div class="form-row">
								<div class="form-group col-md-4">
    								<label for="numeroEmpleado">Número de empleado</label>
      								<input name="numeroEmpleado" id="numeroEmpleado" th:field="*{numeroEmpleado}" type="text" class="form-control" placeholder="Escribe el número del empleado..."
										pattern="^([0-9]{6})$"
										title="El número de empleado solo debe tener números" 
									 	maxlength="6" required
									>
    							</div>
    							<div class="form-group col-md-4">
    								<label for="numeroTelefonico">Teléfono</label>
      								<input max="10" name="numeroTelefonico" id="numeroTelefonico" th:field="*{numeroTelefonico}" type="text" class="form-control" placeholder="Escribe el teléfono..."
										pattern="^([0-9]{10})$"
										title="El teléfono debe contener 10 dígitos" 
							   	 		maxlength="10"
									>
    							</div>
    							<div class="form-group col-md-4">
    								<label>Municipio</label>
      								<select id="municipio" name="municipio" th:field="*{municipio.idmunicipio}" class="form-control">
        								<option th:each="municipio: ${listMunicipio}"
											th:text="${municipio.nombre}" th:value="${municipio.idmunicipio}"></option>
      								</select>
   	 							</div>
  							</div>
  							<div class="form-row">
								<div class="form-group col-md-4" hidden>
    								<label>Rol</label>
      								<select name="rol" id="rol" class="form-control" >
										<option selected value="ROLE_ENLACE">Enlace</option>
      								</select>
   	 							</div>
								<div class="form-group col-md-4">
    								<label for="correoElectronico">Correo electrónico</label>
      								<input name="correoElectronico" id="correoElectronico" th:field="*{correoElectronico}" type="email" class="form-control" placeholder="Escribe el correo electrónico...">
   	 							</div>
    							<div class="form-group col-md-4">
    								<label for="password">Contraseña</label>
      								<input name="password" id="password" type="password" th:field="*{password}" class="form-control" placeholder="********"
										pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[$@$!%*?&])[A-Za-z\d$@$!%*?&]{8,}"
										title="La contraseña debe contener al menos una mayúscula, una minúscula, un número y un caracter especial"
									>
   	 							</div>
								<div class="form-group col-md-6">
									<label for="file">Fotografía</label>
									<input name="file" type="file" class="form-control-file" accept="image/png, image/jpeg" id="file">
								</div>
  							</div>
  							<div style="text-align: center;">
								<button type="submit" class="btn btn-lg btnRegistrar">Registrar</button>
                                <a type="button" class="btn btn-lg btnCancelar" th:href="@{/ciudadano/list}">Cancelar</a>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
		integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script th:src="@{/js/toast.min.js}" type="text/javascript"></script>
	<script type="text/javascript">
		toastr.options = {
			"closeButton": false,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-bottom-right",
			"preventDuplicates": false,
			"onclick": null,
			"showDuration": "300",
			"hideDuration": "1000",
			"timeOut": "5000",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		}
		const messageToastr = document.getElementById("message");
		const alertToastr = document.getElementById("alert");
		const  errorToastr = document.getElementById("errors");
		if (messageToastr.value.length > 0 && alertToastr.value.length > 0) {
			switch (alertToastr.value) {
				case 'success':
					toastr.success(messageToastr.value, '', toastr.options);
					break;
				case 'error':
					toastr.error(messageToastr.value, '', toastr.options);
					break;
			}
		}
		if(errorToastr.value.length > 0){
			let errors = errorToastr.value.split("--");
			for(let i = 0; i !=  errors.length - 1; i++){
				toastr.error(errors[i], '', toastr.options);
			}
		}
	</script>
</body>

</html>